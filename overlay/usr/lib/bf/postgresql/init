#!/usr/bin/with-contenv sh

set -euo pipefail
export BF_E=`basename ${0}`


#======================================================================================================================
# Run initdb using data volume.
#======================================================================================================================

initdb -D "${POSTGRESQL_DATA}"


#======================================================================================================================
# Allow remote connections.
#======================================================================================================================

echo "host all all 0.0.0.0/0 md5" >> ${POSTGRESQL_DATA}/pg_hba.conf
echo "listen_addresses='*'" >> ${POSTGRESQL_DATA}/postgresql.conf
